"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6688],{5189:(t,e,n)=>{n.d(e,{A:()=>u});var a=n(3657),r=n(5353);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const l={props:{userCanSection:{type:String,default:""},userCanBtn:{type:String,default:""},userCanBack:{type:String},address:{type:String},title:{type:String},buttonText:{type:String},btnView:{type:Boolean,default:!1},urlPage:{type:String,default:""},module:{type:String,default:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,r.L8)(a.w,["fixedBarAction"]))};const u=(0,n(4486).A)(l,(function(){var t=this,e=t._self._c;return t.userCan(t.userCanSection)||""==t.userCanSection?e("section",{staticClass:"flex flex-row items-center mb-6",class:{"fixed top-0 z-20 bg-white shadow-md p-3 right-0 w-full-side justify-between":t.fixedBarAction}},[e("h1",{staticClass:"font-medium text-lg",class:t.fixedBarAction?"mr-8":"mr-auto",domProps:{textContent:t._s(t.title)}}),t._v(" "),e("section",{staticClass:"flex flex-row"},[t.userCan(t.userCanBack)?e("inertia-link",{staticClass:"button button-default-responsive button-primary-subtle flex flex-row items-center mr-2",attrs:{href:t.$route(t.address,{module:t.module})}},[e("icon-chevron-left",{staticClass:"w-5 md:mr-2"}),t._v(" "),e("span",{staticClass:"hidden md:inline"},[t._v("\n                Back\n            ")])],1):t._e(),t._v(" "),t.userCan(t.userCanBtn)||""==t.userCanBtn?e("button",{staticClass:"button button-default-responsive button-primary flex flex-row items-center",attrs:{type:"submit"}},[e("icon-save",{staticClass:"w-5 md:mr-2"}),t._v(" "),e("span",{staticClass:"hidden md:inline",domProps:{textContent:t._s(t.buttonText)}})],1):t._e()],1)]):t._e()}),[],!1,null,null,null).exports},6688:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var a=n(2495),r=n.n(a),o=n(6786),i=n(6054),s=n(5189),l=n(3657),u=n(5353);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==c(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=axios.CancelToken,y=f.source();const b={name:"AdminCmsLayoutCreate",components:{InputGroup:o.A,SelectGroup:i.A,TopOptionSection:s.A},layout:"admin-layout",props:{templates:{type:Object|Array,required:!0},layoutTypes:{type:Object,required:!0}},data:function(){return{autoUpdateSlug:!0,formData:{name:"",slug:"",template_id:""},isLoadingTemplate:!1,selectedTemplate:null}},computed:m(m({},(0,u.L8)(l.w,["fixedBarAction"])),{},{isTemplates:function(){try{return Object.keys(this.templates).length}catch(t){return!1}},selectedTemplateHasFields:function(){try{return!!this.selectedTemplate&&this.selectedTemplate.template_fields.length}catch(t){return!1}},selectedTemplateId:function(){var t;return null!==(t=this.formData.template_id)&&void 0!==t?t:""}}),methods:{cancelLoadTemplate:function(){this.isLoadingTemplate&&(y.cancel("Template load cancelled"),y=f.source())},onNameInput:function(){this.autoUpdateSlug&&(this.formData.slug=this.slugify(this.formData.name))},onSelectedTemplateIdChange:_.debounce((function(){var t=this;this.selectedTemplate=null,this.cancelLoadTemplate(),this.selectedTemplateId&&(this.isLoadingTemplate=!0,axios.get(this.$route("admin.api.cms.templates.show",this.selectedTemplateId)).then((function(e){t.selectedTemplate=_.cloneDeep(e.data.data),t.setNewTemplateContent()})).catch((function(e){axios.isCancel(e)||(t.$errorToast("Failed to load selected template"),console.log(e))})).finally((function(){t.isLoadingTemplate=!1})))}),500),onSlugBlur:function(){this.formData.slug=this.slugify(this.formData.slug)},onSlugInput:function(){this.autoUpdateSlug=!1},setNewTemplateContent:function(){this.selectedTemplateHasFields||(this.formData.content={});var t={};_.forEach(this.selectedTemplate.template_fields,(function(e){t[e.id]={data:"",template_field_id:e.id}})),this.$set(this.formData,"content",_.cloneDeep(t))},slugify:function(t){return t&&t.length?r()(t,{lower:!0}):""},submit:function(){this.$inertia.post(this.$route("admin.cms.layouts.store"),this.formData)}},watch:{selectedTemplateId:{handler:"onSelectedTemplateIdChange"}}};const g=(0,n(4486).A)(b,(function(){var t=this,e=t._self._c;return e("form",{staticClass:"max-w-5xl mx-auto",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("TopOptionSection",{attrs:{userCanSection:"cms_advanced.create",userCanBack:"cms_advanced.view",address:"admin.cms.layouts.index",title:"Create Layout",buttonText:"Create Layout"}}),t._v(" "),e("div",{staticClass:"bg-white py-6 shadow-subtle rounded-lg"},[e("div",{staticClass:"block px-6 w-full"},[e("select-group",{attrs:{"error-message":t.getPageErrorMessage("template_id"),"label-text":"Template","input-any-option-enabled":!0,"input-any-option-label":"Please select a template","input-autofocus":!0,"input-id":"template_id","input-name":"template_id","input-options":t.isTemplates?t.templates:{},"input-option-label-key":"name","input-option-value-key":"id","input-required":!0},on:{errorHidden:function(e){return t.clearPageErrorMessage("template_id")}},model:{value:t.formData.template_id,callback:function(e){t.$set(t.formData,"template_id",e)},expression:"formData.template_id"}}),t._v(" "),e("select-group",{staticClass:"mt-4",attrs:{"error-message":t.getPageErrorMessage("type"),"label-text":"Layout Type","input-any-option-enabled":!0,"input-any-option-label":"Please select a layout type","input-id":"type","input-name":"type","input-options":t.layoutTypes,"input-required":!0},on:{errorHidden:function(e){return t.clearPageErrorMessage("type")}},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}}),t._v(" "),e("input-group",{staticClass:"mt-4",attrs:{"error-message":t.getPageErrorMessage("name"),"input-autocomplete":"layout_name","input-id":"name","input-name":"name","input-required":!0,"input-type":"text","label-text":"Layout Name"},on:{errorHidden:function(e){return t.clearPageErrorMessage("name")},input:t.onNameInput},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),t._v(" "),e("input-group",{staticClass:"mt-4",attrs:{"error-message":t.getPageErrorMessage("slug"),"input-autocomplete":"layout_slug","input-id":"slug","input-name":"slug","input-required":!0,"input-type":"text","label-text":"Layout Slug"},on:{blur:t.onSlugBlur,errorHidden:function(e){return t.clearPageErrorMessage("slug")},input:t.onSlugInput},model:{value:t.formData.slug,callback:function(e){t.$set(t.formData,"slug",e)},expression:"formData.slug"}})],1)]),t._v(" "),!this.isLoadingTemplate&&t.selectedTemplateHasFields?e("div",{staticClass:"bg-white mt-6 px-4 py-6 shadow-subtle rounded-lg"},[e("p",{staticClass:"text-lg"},[t._v("Fields")]),t._v(" "),e("content-editor",{staticClass:"mt-4",attrs:{"template-fields":t.selectedTemplate.template_fields},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1):t._e()],1)}),[],!1,null,null,null).exports}}]);